{"version":3,"file":"oscd-open.js","sourceRoot":"","sources":["../oscd-open.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,KAAK,CAAC;AACvC,OAAO,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AAE1C,OAAO,EAAE,YAAY,EAAE,MAAM,wBAAwB,CAAC;AAEtD,MAAM,CAAC,OAAO,OAAO,QAAS,SAAQ,UAAU;IAI9C,KAAK,CAAC,GAAG;QACP,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;IACrB,CAAC;IAED,KAAK,CAAC,OAAO,CAAC,KAAY;;QACxB,MAAM,IAAI,GAAG,MAAA,MAA0B,KAAK,CAAC,MAAO,0CAAE,KAAK,0CAAE,IAAI,CAAC,CAAC,CAAC,CAAC;QACrE,IAAI,CAAC,IAAI;YAAE,OAAO;QAElB,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC;QAC/B,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC;QAC1B,MAAM,GAAG,GAAG,IAAI,SAAS,EAAE,CAAC,eAAe,CAAC,IAAI,EAAE,iBAAiB,CAAC,CAAC;QAErE,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC,CAAC;QAC/C,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;IAC7B,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAA;;iBAEE,CAAC,EAAE,MAAM,EAAc,EAAE,EAAE;YAClC,6CAA6C;YAC1B,MAAO,CAAC,KAAK,GAAG,EAAE,CAAC;QACxC,CAAC;kBACS,IAAI,CAAC,OAAO;;;KAGzB,CAAC;IACJ,CAAC;CACF;AA9BC;IADC,KAAK,CAAC,OAAO,CAAC;uCACU","sourcesContent":["import { html, LitElement } from 'lit';\nimport { query } from 'lit/decorators.js';\n\nimport { newOpenEvent } from '@openscd/open-scd-core';\n\nexport default class OscdOpen extends LitElement {\n  @query('input')\n  input!: HTMLInputElement;\n\n  async run() {\n    this.input.click();\n  }\n\n  async openDoc(event: Event): Promise<void> {\n    const file = (<HTMLInputElement | null>event.target)?.files?.item(0);\n    if (!file) return;\n\n    const text = await file.text();\n    const docName = file.name;\n    const doc = new DOMParser().parseFromString(text, 'application/xml');\n\n    this.dispatchEvent(newOpenEvent(doc, docName));\n    this.input.onchange = null;\n  }\n\n  render() {\n    return html`\n      <input\n        @click=${({ target }: MouseEvent) => {\n          // eslint-disable-next-line no-param-reassign\n          (<HTMLInputElement>target).value = '';\n        }}\n        @change=${this.openDoc}\n        type=\"file\"\n      />\n    `;\n  }\n}\n"]}